$ws.declareModule({namespace:"SBIS3.CORE",name:"FieldLabel",imports:["SBIS3.CORE.FieldAbstract"]},function(a){$ws.proto.FieldLabel=a.extend({$protected:{_options:{multiline:false,useExtendedFormatting:false,format:""}},$constructor:function(){this._container.find(".ws-field").addClass("ws-field-label").end().removeAttr("tabindex").css("overflow","hidden");this._curval=this._options.value;},_createMarkup:function(c){var b=$ws.proto.FieldLabel.superclass._createMarkup.apply(this,arguments);return this._extendMarkup(b,"<div class='input-field{{? it.multiline}} ws-field-label-multiline{{?}}'><span>{{=it.value}}</span></div>");},_bindInternals:function(){this._inputControl=this._container.find(".input-field span");this._inputControl.attr("title",this._setTooltip(this._options.tooltip?this._options.tooltip:this._options.value));},_setValueInternal:function(c){if(this._curval!==c||this._options.useExtendedFormatting===true){var b;this._curval=c;if(this._options.useExtendedFormatting){b=$ws.helpers.format(this.getLinkedContext(),this._options.format);}else{b=this._formatValue(c);}this._inputControl.html($ws.helpers.escapeHtml(b));if(this._options.tooltip===""){this._inputControl.attr("title",this._setTooltip(b));}}},_formatValue:function(g){var b=this.getLinkedContext(),h,c=this.getName(),e,d,f=g;if(b){h=b.getFieldOrigin(c);if(h){e=h.getRecord();}}if(e&&e.hasColumn(c)){d=e.getColumnType(c);switch(d){case"Перечисляемое":f=$ws.render.defaultColumn.enumType(g);break;case"Деньги":f=$ws.render.defaultColumn.money(g);break;case"Дата":case"Дата и время":f=$ws.render.defaultColumn.timestamp(g,d);break;case"Число целое":f=$ws.render.defaultColumn.integer(g);break;}}return typeof f=="boolean"?""+f:f;},_setDisableAttr:function(){},getTabindex:function(){return null;},_getElementToFocus:function(){return undefined;},_setTooltip:function(c){var b=c;if(typeof c=="string"){b=$ws.helpers.escapeTagsFromStr(b,"");b=$ws.helpers.unEscapeHtmlSpecialChars(b.substring(0,256));}return b;},_redraw:function(b){if((b&&!this._hasMarkup())||!b){if(!$ws.proto.FieldLabel.__markupTemplate){$ws.proto.FieldLabel.__markupTemplate=doT.template(this._getMarkupTemplate());}this._container.html($ws.proto.FieldLabel.__markupTemplate(this._options));}}});return $ws.proto.FieldLabel;});