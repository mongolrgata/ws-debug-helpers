$ws.declareModule({namespace:"SBIS3.CORE",name:"ModalOverlay",imports:[]},function(){$ws.single.ModalOverlay=new ($ws.proto.Abstract.extend({$protected:{_overlay:undefined,_overlayState:false},$constructor:function(){this._publish("onOverlayToggle");},_createMarkup:function(){if(this._overlay===undefined){this._overlay=$("<div></div>").appendTo(document.body).hide().addClass("ws-window-overlay");this._overlay.click(function(){var a=$ws.single.WindowManager.getActiveWindow();if(a){a.onBringToFront();}});}},show:function(a){$ws.single.ioc.resolve("ILogger").log("ModalOverlay","Использование метода show недопустимо, используйте adjust");if(a!==undefined){$ws.single.ioc.resolve("ILogger").log("ModalOverlay","Параметр метода show() не учитывается c версии 3.6, используйте $ws.single.WindowManager.acquireZIndex() для регистрации модального элемента");}this.adjust();},zIndex:function(a){$ws.single.ioc.resolve("ILogger").log("ModalOverlay","Использование метода zIndex недопустимо, используйте adjust");this._setZIndex(a);},_setZIndex:function(a){if(this._overlay!==undefined){this._overlay.css("z-index",a);}},hide:function(){$ws.single.ioc.resolve("ILogger").log("ModalOverlay","Использование метода hide недопустимо, используйте adjust");this._hide();},_show:function(){if(this._overlayState!==true){this._createMarkup();this._overlay.show();this._notify("onOverlayToggle",this._overlayState=true);}},_hide:function(){if(this._overlay!==undefined){if(this._overlayState!==false){this._overlay.hide();this._notify("onOverlayToggle",this._overlayState=false);}}},adjust:function(){var a=$ws.single.WindowManager.getMaxVisibleZIndex();if(a>0){this._show();this._setZIndex(a-1);return true;}else{this._hide();return false;}},getState:function(){return this._overlayState;},moveDown:function(){$ws.single.ioc.resolve("ILogger").log("ModalOverlay","Использование метода moveDown недопустимо, используйте adjust");this.adjust();}}))();return $ws.single.ModalOverlay;});