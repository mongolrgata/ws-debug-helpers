$ws.declareModule({namespace:"SBIS3.CORE",name:"InfoboxTrigger",imports:["SBIS3.CORE.Control","SBIS3.CORE.Infobox"]},function(a,b){$ws.proto.InfoboxTrigger=a.Control.extend({$protected:{_options:{text:"",img:$ws._const.wsRoot+"img/themes/"+($ws._const.theme?$ws._const.theme:"wi")+"/infobox-trigger-default.png",imgAlign:"left",tooltip:"",tooltipWidth:undefined,showDelay:200},_block:undefined},$constructor:function(){this._container.addClass("ws-helper");this._redraw();},_redraw:function(){if(this._block){this._block.unbind();this._block.remove();this._block=null;}this._block=$("<div></div>").appendTo(this._container);var d;if(this._options.img){d=$('<img class="ws-helper-img ws-helper-img-align-'+this._options.imgAlign+'" src="'+this._options.img+'">');}if(d&&this._options.imgAlign==="left"){this._block.append(d);}if(this._options.text){this._block.append('<span class="ws-helper-text">'+this._options.text+"</span>");}if(d&&this._options.imgAlign==="right"){this._block.append(d);}var c=this;this._block.bind("mouseenter",function(){var f="";if(c._options.tooltip){if(typeof c._options.tooltip=="function"){try{f=c._options.tooltip();}catch(g){f="Ошибка при получении текста подсказки: "+g.message;}}else{if(typeof c._options.tooltip=="string"){f=c._options.tooltip;}}}else{f=c.getLinkedContext().getValue(c.getName());}b.show(c._container,f,c._options.tooltipWidth,parseInt(c._options.showDelay,10));}).bind("mouseleave",function(){b.hide();});},destroy:function(){this._block.unbind();this._block=null;this._container.empty().remove();$ws.proto.InfoboxTrigger.superclass.destroy.apply(this,arguments);}});return $ws.proto.InfoboxTrigger;});