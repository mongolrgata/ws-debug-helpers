$ws.declareModule({namespace:"SBIS3.CORE",name:"HTMLChunk",imports:["SBIS3.CORE.Control"]},function(a){$ws.proto.HTMLChunk=a.Control.extend({$protected:{_options:{cssClassName:"ws-html-chunk",text:""}},$constructor:function(){if(this._isCorrectContainer()){if(!this._hasMarkup()){this._container.html(this._options.text);this._options.text=null;}this._container.bind("mousewheel",function(b){b.stopPropagation();return true;});}},_redraw:function(){if(this._options.text!==null){this.setContent(this._options.text);this._options.content=null;}},_createMarkup:function(b){return this._extendMarkup(b,"{{? it.text }}{{=it.text}}{{?}}");},_initFocusCatch:function(){},getContent:function(){return this._container.html();},setContent:function(d,b){var c=b?this._container.find(b):this._container;c.empty().append(d);this._notifyOnSizeChanged(this,this);},loadContent:function(c){var b=this;if(!c){throw new Error("HTMLChunk.loadContent: URL должен быть задан");}return $ws.single.ioc.resolve("ITransport",{url:c}).execute().addCallback(function(d){b.setContent(d);return d;});},recalcOnDOMChange:function(){this._notifyOnSizeChanged(this,this);},editContent:function(c){var b=false;try{if(this._isCorrectContainer()){b=c(this.getContainer());}}finally{if(b!==false){this._notifyOnSizeChanged(this,this);}}},destroy:function(){this._container.children().remove();$ws.proto.HTMLChunk.superclass.destroy.apply(this,arguments);}});return $ws.proto.HTMLChunk;});