$ws.declareModule({namespace:"SBIS3.CORE",name:"FiltersWindow",imports:["SBIS3.CORE.FiltersArea"]},function(a){$ws.proto.FiltersWindow=a.extend({_loadTemplate:function(){var d=this,e=new $ws.proto.Deferred(),b=new $ws.proto.Deferred(),c=new $ws.proto.ParallelDeferred({steps:[e,b]});$ws.core.attachInstance("SBIS3.CORE.FiltersDialog",{template:this._options.template,parent:d,linkedContext:this.getLinkedContext(),handlers:{onReady:function(){e.callback();},onAfterClose:function(){d._childControls=[];d.destroy();}}}).addCallback(function(f){d._childControls=f.getImmediateChildControls();b.callback();$ws.single.CommandDispatcher.declareCommand(f,"applyFilter",function(){d.applyFilter();f.close();return true;});$ws.single.CommandDispatcher.declareCommand(f,"resetFilter",function(){d.resetFilter();f.close();return true;});});c.done().getResult().addCallback(function(){d._notify("onReady");});return new $ws.proto.Deferred().callback();},_redraw:function(){}});return $ws.proto.FiltersWindow;});