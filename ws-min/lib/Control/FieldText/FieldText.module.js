$ws.declareModule({namespace:"SBIS3.CORE",name:"FieldText",imports:["SBIS3.CORE.FieldString"]},function(a){$ws.proto.FieldText=a.extend({$protected:{_options:{height:"",cssClassName:"ws-field-text"},_keysWeHandle:[$ws._const.key.enter]},$constructor:function(){this._inputControl.height("100%").val("");if(this._options.height=="100%"){this._container.find(".ws-field").addClass("ws-field-fullheight");}else{this._container.find(".ws-field").height(this._options.height?this._options.height:"auto");}if($.browser.msie&&$.browser.version<8){var b=this,c=function(){var d=b._container.find(".ws-field");var e=this.getContainer().height();e-=d.outerHeight()-d.height();d.height(e);b._inputControl.height(e);};this.getParent().subscribe("onResize",$.proxy(c,this)).subscribe("onAfterShow",$.proxy(c,this));}this._inputControl.unbind("keypress paste").bind("mousewheel",function(d){d.stopPropagation();return true;});},_firstSelect:function(){return true;},_createMarkup:function(c){var b=a.superclass._createMarkup.apply(this,arguments);return this._extendMarkup(b,"<textarea title='{{=it.tooltip}}' {{? it.tooltipInside }}placeholder='{{=it.tooltip}}'{{?}} {{? it.maxlength }}maxlength='{{=it.maxlength}}'{{?}} name='{{=it.name}}' ></textarea>");},_bindInternals:function(){this._inputControl=this._container.find("textarea");this._createPlaceholder();},_keyboardHover:function(b){if(b.shiftKey||b.altKey||b.ctrlKey){return true;}b.stopPropagation();return true;},_redraw:function(b){if((b&&!this._hasMarkup())||!b){if(!$ws.proto.FieldText.__markupTemplate){$ws.proto.FieldText.__markupTemplate=doT.template(this._getMarkupTemplate());}this._container.html($ws.proto.FieldText.__markupTemplate(this._options));}}});return $ws.proto.FieldText;});