$ws.proto.DataViewAbstract.MarkedRowOptionsPlugin=$ws.proto.DataViewAbstract.extendPlugin({$protected:{_options:{markedRowOptions:{}},_isRenderedFootRowOptions:false},$condition:function(){return !Object.isEmpty(this._options.markedRowOptions);},$constructor:function(){this.subscribe("onChangeSelection",this._onChangeSelectionHandler);},_onChangeSelectionHandler:function(){var a=this.getSelection(true).length;if(this._isRenderedFootRowOptions){if(!a){this._drawRowOptionsButtons();}}else{if(a){this._drawRowOptionsButtons(true);}}},_drawRowOptionsButtons:function(c){if(!Object.isEmpty(this._options.markedRowOptions)){var e="ws-browser-block-options-"+this.getId();c=c||false;if(c){if(!this._foot.find("#"+e).length){var b=this._foot.find(".ws-browser-pager"),f=$('<div class="ws-browser-foot-row-options" id="'+e+'"></div>'),a,d=this;if(b){for(var g in this._options.markedRowOptions){var h=this._options.markedRowOptions[g];a=$('<div class="ws-browser-foot-row-option" id="'+g+'"></div>');if(typeof(h.action)==="function"){a.bind("click",function(i){d._options.markedRowOptions[i.currentTarget.id].action.apply(d,d.getSelection(true));});}f.append(a.append('<span class="ws-browser-foot-row-option-icon" style="background: '+["url(",$ws.helpers.processImagePath(h.image),") no-repeat scroll"].join("")+'"></span><span class="ws-browser-foot-row-option-button">'+g+"</span>"));}b.parent().append(f);}}else{if(!this._isRenderedFootRowOptions){this._foot.find("#"+e).removeClass("ws-hidden");}}this._isRenderedFootRowOptions=true;}else{if(this._isRenderedFootRowOptions){this._foot.find("#"+e).addClass("ws-hidden");this._isRenderedFootRowOptions=false;}}this._heightChangedIfVisible();}}});